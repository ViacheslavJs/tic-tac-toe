(()=>{"use strict";document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("end"),n=document.getElementById("continued"),t=document.getElementById("layer"),i=document.getElementById("player1"),c=document.getElementById("player2"),s=document.getElementById("times"),l=document.getElementById("circle"),o={1:{},2:{}},d=document.getElementById("choose");d.textContent="Start",d.addEventListener("click",(function e(){i.innerHTML="&#9660; оберіть фігурку &#9660;",s.classList.add("active"),l.classList.add("active"),document.addEventListener("click",y),d.removeEventListener("click",e)}));const a=document.getElementById("modal");function r(){a.style.display="block",t.classList.add("layer-active")}function y(){const t=event.target;if(t===s||t===l){i.style.border="",i.textContent="Player 1",i.appendChild(t.cloneNode(!0)),o[1].icon=t===s?"times":"circle",c.textContent="Player 2",c.appendChild(t===s?l.cloneNode(!0):s.cloneNode(!0)),o[2].icon=t===s?"circle":"times",d.textContent="Go!",d.style.border="1px solid green",d.style.color="green",document.removeEventListener("click",y),s.classList.remove("active"),l.classList.remove("active"),d.addEventListener("click",r);const a=document.getElementById("board"),m=document.getElementById("message1"),v=document.getElementById("message2");let p=o[1].icon;console.log(o),m.innerHTML="Player 1 "+(p===o[1].icon?'<span class="go">&nbsp;Хід</span>':""),v.innerHTML="Player 2 "+(p===o[2].icon?'<span class="go">&nbsp;Хід</span>':"");let u=["","","","","","","","",""],g=!0;function E(){const e=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(const n of e){const[e,t,i]=n;if(u[e]&&u[e]===u[t]&&u[e]===u[i])return"Player "+(u[e]===o[1].icon?"1":"2")}return null}function L(t){if(!g||""!==u[t])return;u[t]=p;const i=document.getElementById(`cell${t}`),c="times"===p?s.cloneNode(!0):l.cloneNode(!0);i.appendChild(c);const d=E();d?(m.textContent=`Гравець ${d} переміг!`,v.textContent="",g=!1,e.style.visibility="visible",n.style.visibility="visible"):u.every((e=>""!==e))?(m.textContent="Гра закінчилась в нічию!",v.textContent="",g=!1,e.style.visibility="visible",n.style.visibility="visible"):(p=p===o[1].icon?o[2].icon:o[1].icon,m.innerHTML="Player 1 "+(p===o[1].icon?'<span class="go">&nbsp;Хід</span>':""),v.innerHTML="Player 2 "+(p===o[1].icon?"":'<span class="go">&nbsp;Хід</span>'))}function b(){for(let e=0;e<9;e++){const n=document.createElement("div");n.className="cell",n.id=`cell${e}`,n.addEventListener("click",(()=>L(e))),a.appendChild(n)}}b(),e.addEventListener("click",(()=>{location.reload()})),n.addEventListener("click",(()=>{a.innerHTML="",b(),e.style.visibility="hidden",n.style.visibility="hidden",p=o[1].icon,m.innerHTML="Player 1 "+(p===o[1].icon?'<span class="go">&nbsp;Хід</span>':""),v.innerHTML="Player 2 "+(p===o[2].icon?'<span class="go">&nbsp;Хід</span>':""),u=["","","","","","","","",""],g=!0}))}}}))})();